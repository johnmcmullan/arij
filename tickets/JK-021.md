---
id: JK-021
title: Add user accounts and session-based auth
status: backlog
type: story
created: 2026-02-09
priority: medium
epic: JK-005
component: server
labels: [auth, security]
---

## Description

Add a `users` table (username, email, password hash) and session-based auth with express-session + bcrypt. Protect write routes (create/edit/delete) behind authentication middleware.

## Acceptance Criteria

- [ ] `users` table with id, username, email, password_hash, created_at
- [ ] Registration page (`GET /register`, `POST /register`)
- [ ] Login page (`GET /login`, `POST /login`)
- [ ] Session stored in SQLite (connect-sqlite3)
- [ ] Auth middleware protects POST/PUT/PATCH/DELETE routes
- [ ] Current user available in all templates for nav display
